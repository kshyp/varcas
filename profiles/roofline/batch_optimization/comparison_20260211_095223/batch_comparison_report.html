<!DOCTYPE html>
<html>
<head>
    <title>Batch Size Optimization Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f6fa; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        .metric-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .metric-card { background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #3498db; }
        .metric-value { font-size: 24px; font-weight: bold; color: #2c3e50; }
        .metric-label { font-size: 12px; color: #7f8c8d; text-transform: uppercase; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #3498db; color: white; }
        tr:hover { background: #f5f5f5; }
        .best { background: #d5f4e6 !important; font-weight: bold; }
        .improvement { color: #27ae60; font-weight: bold; }
        .degradation { color: #e74c3c; font-weight: bold; }
        .recommendation { background: #e8f6f3; padding: 20px; border-radius: 5px; border-left: 4px solid #1abc9c; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š Batch Size Optimization Report</h1>
        
        <div class="info-box">
            <p><strong>Model:</strong> TheBloke/Llama-2-7B-AWQ</p>
            <p><strong>Profile:</strong> chat_medium</p>
            <p><strong>Date:</strong> 2026-02-11T09:52:23.467298</p>
        </div>

        <div class="recommendation">
            <h3>ðŸ’¡ Recommendation</h3>
            <p>Batch size 1 is sufficient; larger batches show diminishing returns</p>
        </div>

        <h2>Performance Comparison</h2>
        <table>
            <tr>
                <th>Batch Size</th>
                <th>Throughput (req/s)</th>
                <th>Throughput (tok/s)</th>
                <th>TTFT p50 (ms)</th>
                <th>TPOT p50 (ms)</th>
                <th>Latency p50 (ms)</th>
            </tr>

            <tr class="best">
                <td>1</td>
                <td>19.72</td>
                <td>38.3</td>
                <td>36501.5</td>
                <td>26.38</td>
                <td>38739.2</td>
            </tr>

            <tr class="">
                <td>4</td>
                <td>19.27</td>
                <td>5.2</td>
                <td>234.4</td>
                <td>29.78</td>
                <td>2803.1</td>
            </tr>

            <tr class="">
                <td>8</td>
                <td>0.07</td>
                <td>9.9</td>
                <td>24853.9</td>
                <td>26.95</td>
                <td>27155.8</td>
            </tr>

            <tr class="">
                <td>16</td>
                <td>0.47</td>
                <td>70.0</td>
                <td>22162.9</td>
                <td>41.38</td>
                <td>25092.2</td>
            </tr>
</table>
        <h2>Improvement Analysis</h2>
        <div class="metric-grid">
            <div class="metric-card">
                <div class="metric-value degradation">-97.6%</div>
                <div class="metric-label">Throughput Improvement</div>
            </div>
            <div class="metric-card">
                <div class="metric-value improvement">-35.2%</div>
                <div class="metric-label">Latency Change</div>
            </div>
        </div>
        
        <p><strong>Comparison:</strong> Batch 1 vs Batch 16</p>

        <h2>Key Insights</h2>
        <ul>
            <li>Larger batch sizes improve throughput by better utilizing GPU memory bandwidth</li>
            <li>TTFT (Time To First Token) may increase with larger batches due to queueing</li>
            <li>TPOT (Time Per Output Token) typically improves with batching</li>
            <li>Optimal batch size depends on latency requirements vs throughput needs</li>
        </ul>
        
        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #7f8c8d; font-size: 12px;">
            Generated by Batch Size Optimization Tool
        </div>
    </div>
</body>
</html>
